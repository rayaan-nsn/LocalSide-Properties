var propertyData = {
    "property": [
        {
            "id": "prop1",
            "type": "House",
            "title": "Woronzow Road, St Johns Wood, London, NW8",
            "bedrooms": 5,
            "postcode": "NW1",
            "price": 17000000,
            "tenure": "Freehold",
            "shortDescription": "This 1860s villa in St John's Wood, London has a large entertaining space, principal suite with en suite bathroom, and four additional bedrooms. It also has a secluded garden with swimming pool and pool house, off-street parking, and the potential for extension. Located near St John's Wood High Street and underground station",
            "description": "A lateral stucco detached villa built circa 1860 (not listed), set behind a walled and gated entrance, with a secluded 113 ft rear garden, off street parking quietly located on the East side of St John's Wood adjacent to Norfolk Road. This low built house, laid out mainly across two floors, is not listed and provides an opportunity to extend (subject to appropriate planning consents).\n" + "\n" +
                "The house extends to approximately 4805 sq ft featuring a large entertaining space with a drawing room, second reception room, dining room and kitchen/breakfast room. The ground floor also provides a guest cloakroom/WC, storage and boot room/utility.\n" + "\n" +
                "The principal suite is located on the first floor with a dressing room, en suite bathroom and access to a roof terrace overlooking the gardens (also with the opportunity to extend subject to the appropriate planning consents). There are four further bedrooms and three bath/shower rooms (two en suite).\n" + "\n" +
                "This private mature rear garden features a swimming pool with pool house, plant and changing rooms.\n" + "\n" +
                "Woronzow Road is located on the East side of St. John's Wood. St John's Wood High Street has a distinctly English village feel yet enjoys a cosmopolitan population and mix of restaurants and shops. St John's Wood underground station (Jubilee Line) is just two stops from Bond Street and in the heart of the West End.",
            "location": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2481.671301010961!2d-0.17272864901373647!3d51.53758841621707!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761a95e6244d51%3A0x593358d2097995fe!2sWoronzow%20Rd%2C%20London%2C%20UK!5e0!3m2!1sen!2slk!4v1673125023518!5m2!1sen!2slk",
            "picture1": "./images/prop1/prop1Img1.jpeg",
            "picture2": "./images/prop1/prop1Img2.jpeg",
            "picture3": "./images/prop1/prop1Img3.jpeg",
            "picture4": "./images/prop1/prop1Img4.jpeg",
            "picture5": "./images/prop1/prop1Img5.jpeg",
            "picture6": "./images/prop1/prop1Img6.jpeg",
            "picture7": "./images/prop1/prop1Img7.jpeg",
            "picture8": "./images/prop1/prop1Img8.jpeg",
            "floorPlan": "./images/prop1/prop1FloorPlan.jpeg",
            "url": "https://www.rightmove.co.uk/properties/85857954#/?channel=RES_BUY",
            "added": {
                "month": "September",
                "day": 14,
                "year": 2021
            }
        },
        {
            "id": "prop2",
            "type": "House",
            "title": "Hamilton Terrace, London, NW8",
            "bedrooms": 10,
            "postcode": "NW1",
            "price": 15000000,
            "tenure": "Freehold",
            "shortDescription" : "Substantial 1830s detached house in affluent St. John's Wood, with planning permission for 12,500 sq ft single family residence with extensive leisure and pool. Close to transport, near St. John's Wood and Maida Vale Underground Stations and easy access to amenities and prime locations in London. Complete architect pack available on request",
            "description": "A substantial double fronted detached house, built in circa 1830, currently arranged as six apartments, with off street parking and a 150 ft West facing garden. The property has planning permission to create a sensational single family residence of circa 12,500 square feet with extensive leisure and a swimming pool.\n" + "\n" +
                "Complete architect pack available on request\n" + "\n" + "Hamilton Terrace is located on the West side of St. John's Wood, an area renowned as one of the most affluent parts of London, being characterised by prime residential properties, boutique shops and restaurants. Hamilton Terrace is one of the highest value roads in St. John's Wood. The house is 450 metres to the southwest of St John's Wood Underground Station, which provides Jubilee line services to the West End, Bond Street (5 minutes), London Bridge (14 minutes), and Canary Wharf (20 minutes).\n" + "\n" +
                "Maida Vale Underground Station (Bakerloo line) is less than 500 metres away. The area is also served by a number of bus routes that run along Wellington Road (A41) and Maida Vale (A5). The excellent amenities of Marylebone, Mayfair and the West End are also easily accessible by road, tube or bus. All distances and times are approximate.",
            "location": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2482.065649317944!2d-0.18326314901399873!3d51.53035571674615!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761aa4097af419%3A0x34e0e0ea269ef009!2sHamilton%20Terrace%2C%20London%20NW8%2C%20UK!5e0!3m2!1sen!2slk!4v1673125126468!5m2!1sen!2slk",
            "picture1": "./images/prop2/prop2Img1.jpeg",
            "picture2": "./images/prop2/prop2Img2.jpeg",
            "picture3": "./images/prop2/prop2Img3.jpeg",
            "picture4": "./images/prop2/prop2Img4.jpeg",
            "picture5": "./images/prop2/prop2Img5.jpeg",
            "picture6": "./images/prop2/prop2Img6.jpeg",
            "picture7": "./images/prop2/prop2Img7.jpeg",
            "picture8": "./images/prop2/prop2Img8.jpeg",
            "floorPlan": "./images/prop2/prop2FloorPlan.jpeg",
            "url": "https://www.rightmove.co.uk/properties/129315881#/?channel=RES_BUY",
            "added": {
                "month": "November",
                "day": 22,
                "year": 2022
            }
        },
        {
            "id": "prop3",
            "type": "Condo",
            "title": "Ingram Avenue, Hampstead Garden, London, NW11",
            "bedrooms": 9,
            "postcode": "NW1",
            "price": 12500000,
            "tenure": "Freehold",
            "shortDescription":"Exceptional Grade II Listed Lutyens residence on double width plot in Turner's Wood Bird Sanctuary. Built by leading British architect Sir Edwin Lutyens and rebuilt in 2006 to modern standards while maintaining original layout. Principal rooms face extensive gardens and offer high ceilings and excellent flow for family living",
            "description": "An exceptional Grade II Listed Lutyens residence (1,040 sq m/11,197 sq ft) occupying a magnificent double width plot backing directly onto unspoilt acres of Turner’s Wood Bird Sanctuary.\n" + "\n" +
                "The inspiration for Fairwood House came from Sir Edwin Lanseer Lutyens, the 20th century’s leading British architect. Lutyens was commissioned to design many of the great English country houses as well as being appointed by the\n" +
                "Government to design and build Viceroy House in Delhi, which has since become the residence of the president of India.\n" + "\n" +
                "This imposing property, situated on a double plot of approximately 0.6 acres, faces due south to the rear and also backs directly onto Turners Wood, a 7-acre private bird sanctuary. In 2006, the property was completely rebuilt behind the original facade. In doing so, the current owners brief was to create a house fit for the twenty-first century whilst ensuring that the layout remained loyal to the original that Lutyens created.\n" + "\n" +
                "All of the principal reception rooms on the ground floor are facing the extensive gardens, are interconnected and provide excellent flow and family living accommodation. The house features exceptionally high ceilings, with most of the rooms on the ground floor enjoying ceiling heights in excess of 3.3metres and some rising to well over 4 metres.\n",
            "location": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2479.7142903330364!2d-0.1794279490123112!3d51.573471013591686!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761a7219284529%3A0x449b2b53f5c063d5!2sIngram%20Ave%2C%20London%2C%20UK!5e0!3m2!1sen!2slk!4v1673125201280!5m2!1sen!2slk",
            "picture1": "./images/prop3/prop3Img1.jpeg",
            "picture2": "./images/prop3/prop3Img2.jpeg",
            "picture3": "./images/prop3/prop3Img3.jpeg",
            "picture4": "./images/prop3/prop3Img4.jpeg",
            "picture5": "./images/prop3/prop3Img5.jpeg",
            "picture6": "./images/prop3/prop3Img6.jpeg",
            "picture7": "./images/prop3/prop3Img7.jpeg",
            "picture8": "./images/prop3/prop3Img8.jpeg",
            "floorPlan": "./images/prop3/prop3FloorPlan.jpeg",
            "url": "https://www.rightmove.co.uk/properties/125652572#/?channel=RES_BUY",
            "added": {
                "month": "August",
                "day": 3,
                "year": 2022
            }
        },
        {
            "id": "prop4",
            "type": "House",
            "title": "North End Avenue, Hampstead, London, NW3",
            "bedrooms": 5,
            "postcode": "NW8",
            "price": 8450000,
            "tenure": "Freehold",
            "shortDescription" : "A substantial semi-detached period house abutting Hampstead Heath with driveway and large landscaped gardens, gym/bedroom, 6 bedrooms and 3 bathrooms, ideal location between Hampstead Village and Golders Green with excellent shopping and transport facilities",
            "description": "A substantial semi-detached period house, approached via a sweeping gated driveway, set in one of the most idyllic locations abutting Hampstead Heath and a short distance from Golders Hill Park, located between Hampstead Village and Golders Green, both of which offer excellent shopping and transport facilities.\n" + "\n" +
                "On the ground floor there is an impressive entrance hall with guest cloakroom, leading through to a stunning reception hall, and a split-level dining room which opens onto a substantial kitchen/breakfast room.\n" + "\n" +
                "A wonderful staircase leads up to the first floor to an elegant double aspect drawing room opening on to a light filled conservatory with direct access on to the garden and wonderful Heath views. In addition, there is a gym/bedroom, utility room and second cloakroom on this floor.\n" + "\n" +
                "The second floor has a large principal bedroom suite with ensuite bathroom and two further bedrooms and a family bathroom. The top third floor has two further bedrooms and an additional bathroom.\n" + "\n" +
                "The house occupies a substantial site approaching a 1/3rd of an acre (0.12 hectares) with well-established landscaped gardens and a large terrace all sited next to Hampstead Heath.\n" + "\n" +
                "Externally there is a substantial triple garage along with off street parking for several vehicles.",
            "location": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2480.058656336548!2d-0.18337474901253287!3d51.567158214053755!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761a7a74a8351b%3A0x1059717082627f6e!2sNorth%20End%20Ave%2C%20London%2C%20UK!5e0!3m2!1sen!2slk!4v1673125253506!5m2!1sen!2slk",
            "picture1": "./images/prop4/prop4Img1.jpeg",
            "picture2": "./images/prop4/prop4Img2.jpeg",
            "picture3": "./images/prop4/prop4Img3.jpeg",
            "picture4": "./images/prop4/prop4Img4.jpeg",
            "picture5": "./images/prop4/prop4Img5.jpeg",
            "picture6": "./images/prop4/prop4Img6.jpeg",
            "picture7": "./images/prop4/prop4Img7.jpeg",
            "picture8": "./images/prop4/prop4Img8.jpeg",
            "floorPlan": "./images/prop4/prop4FloorPlan.jpeg",
            "url": "https://www.rightmove.co.uk/properties/129008039#/?channel=RES_BUY",
            "added": {
                "month": "November",
                "day": 11,
                "year": 2022
            }
        },
        {
            "id": "prop5",
            "type": "Apartment",
            "title": "Cumberland Terrace, Regent's Park, London, NW1",
            "bedrooms": 3,
            "postcode": "NW1",
            "price": 8250000,
            "tenure": "Leasehold",
            "shortDescription" : "Brand newly refurbished and interior designed lateral apartment in Regent's Park with 7 floor-to-ceiling windows, terracing, and views of the park. Features high ceilings, triple aspect, natural light, 3 bedrooms, 2 bathrooms, dressing room, underfloor heating, and private gardens. Secure development with 24-hour porterage and CCTV",
            "description": "This rarely available, lateral apartment has just been brand newly refurbished and interior designed with impeccable taste, very much in line with the character of Regent’s Park.\n" + "\n" +
                "Offering fantastic ceiling heights and seven, floor to ceiling windows, plus terracing across the front of the apartment all with tremendous views of the park. The property has a triple aspect and benefits from an abundance of natural light, large rooms and great volume throughout the apartment.\n" + "\n" +
                "The accommodation comprises three double bedrooms and two bathrooms with an outstanding master bedroom with a large dressing room plus ensuite shower room also benefitting from air conditioning. There is a separate kitchen and breakfast room and double reception room with dining room. Further benefits include a guest WC and utility room. There is underfloor heating throughout plus a video entry system and fitted alarm.\n" + "\n" +
                "Cumberland Terrace is a secure development with 24-hour uniformed porterage and CCTV. There are also private gardens to the front for the residence.\n",
            "location": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2482.0145308096053!2d-0.1472665490139932!3d51.53129331667756!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761adecf4ea011%3A0x19007ab7e143d8bd!2sCumberland%20Terrace!5e0!3m2!1sen!2slk!4v1673125313046!5m2!1sen!2slk",
            "picture1": "./images/prop5/prop5Img1.jpeg",
            "picture2": "./images/prop5/prop5Img2.jpeg",
            "picture3": "./images/prop5/prop5Img3.jpeg",
            "picture4": "./images/prop5/prop5Img4.jpeg",
            "picture5": "./images/prop5/prop5Img5.jpeg",
            "picture6": "./images/prop5/prop5Img6.jpeg",
            "picture7": "./images/prop5/prop5Img7.jpeg",
            "picture8": "./images/prop5/prop5Img8.jpeg",
            "floorPlan": "./images/prop5/prop5FloorPlan.jpeg",
            "url": "https://www.rightmove.co.uk/properties/126646838#/?channel=RES_BUY",
            "added": {
                "month": "September",
                "day": 2,
                "year": 2022
            }
        },
        {
            "id": "prop6",
            "type": "Apartment",
            "title": "Elsworthy Road, London, NW3",
            "bedrooms": 4,
            "postcode": "NW1",
            "price": 5750000,
            "tenure": "Freehold",
            "shortDescription" : "Exceptional four-bedroom duplex apartment in Arts & Crafts style building opposite Primrose Hill Park. Features air conditioning, underfloor heating, and full home automation. 3,185 sqft of living space includes a dual aspect living room, open plan kitchen, study, private gardens, and three en-suite bedrooms with private terrace for the principal bedroom",
            "description": "An exceptional four bedroom duplex apartment located opposite the entrance to Primrose Hill Park, on Elsworthy Road. The property is situated within a newly constructed home built in an Arts & Crafts style. This impressive apartment features air conditioning, underfloor heating and a full home automation package.\n" + "\n" +
                "The accommodation comprises 3,185 sqft (295.9 m2) of living space over the two floors. The ground floor consists of a dual aspect living room with an open plan kitchen, study, utility room and front and rear private gardens. On the lower level you have a generous principal bedroom with a dressing room, en-suite bathroom and a private terrace, along with three further en-suite double bedrooms.\n" + "\n" +
                "Situated on Elsworthy Road opposite the entrance to Primrose Hill, the apartment is a short stroll away from all of the amenities of the picturesque Primrose Hill Village, famed for its iconic park and wide selection of bespoke shops, boutiques, restaurants and street cafes. Both Swiss Cottage and Chalk Farm Underground Stations (Jubilee and Northern Line) are within close proximity (0.6mile).",
            "location": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2481.488232141793!2d-0.16776534901358628!3d51.54094581597148!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761a94997868ab%3A0xe7e3cf22e23c6717!2sElsworthy%20Rd%2C%20Elsworthy%20Terrace%2C%20London%20NW3%203DR%2C%20UK!5e0!3m2!1sen!2slk!4v1673125396456!5m2!1sen!2slk",
            "picture1": "./images/prop6/prop6Img1.jpeg",
            "picture2": "./images/prop6/prop6Img2.jpeg",
            "picture3": "./images/prop6/prop6Img3.jpeg",
            "picture4": "./images/prop6/prop6Img4.jpeg",
            "picture5": "./images/prop6/prop6Img5.jpeg",
            "picture6": "./images/prop6/prop6Img6.jpeg",
            "picture7": "./images/prop6/prop6Img7.jpeg",
            "picture8": "./images/prop6/prop6Img8.jpeg",
            "floorPlan": "./images/prop5/prop6FloorPlan.jpeg",
            "url": "https://www.rightmove.co.uk/properties/126802958#/?channel=RES_BUY",
            "added": {
                "month": "October",
                "day": 20,
                "year": 2022
            }
        },
        {
            "id": "prop7",
            "type": "Apartment",
            "title": "Maresfield Gardens III, London NW3",
            "bedrooms": 3,
            "postcode": "NW1",
            "price": 5950000,
            "tenure": "Freehold",
            "shortDescription" : "Ground and lower-ground luxurious apartment with towering ceilings in a quiet residential area with private front garden and communal entrance. Features guest WC, formal reception, open-plan kitchen, dining, and living space with engineered oak flooring, underfloor heating and front garden views",
            "description": "The building is approached from Maresfield Gardens and is set far back from the quiet residential street, behind a front garden of Corten-framed beds and exquisite planting. Steps ascend to the raised ground foyer of the communal entrance.\n" + "\n" +
                "The apartment unfurls over the ground and lower ground floors with soaring ceilings throughout. To right of the entrance is a guest WC and to the left of the hall lies a formal reception. A pair of full-height pivot doors open within a sublime hardwood bookcase to reveal a trio of high-reaching sash windows looking onto the front gardens.\n" + "\n" +
                "Engineered oak in a light, chevron pattern extends through much of the upper leel, and underfloor heating is present throughout the apartment.  From the front reception, a wonderful line of sight is offered to the rear, where an open-plan kitchen, dining space and living room are arranged.",
            "location": "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2481.191734542099!2d-0.17977774901339888!3d51.546383115573704!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761a858275344b%3A0x54f4860d588a1432!2sMaresfield%20Gardens%2C%20London%20NW3%205LA%2C%20UK!5e0!3m2!1sen!2slk!4v1673125454920!5m2!1sen!2slk",
            "picture1": "./images/prop7/prop7Img1.jpeg",
            "picture2": "./images/prop7/prop7Img2.jpeg",
            "picture3": "./images/prop7/prop7Img3.jpeg",
            "picture4": "./images/prop7/prop7Img4.jpeg",
            "picture5": "./images/prop7/prop7Img5.jpeg",
            "picture6": "./images/prop7/prop7Img6.jpeg",
            "picture7": "./images/prop7/prop7Img7.jpeg",
            "picture8": "./images/prop7/prop7Img8.jpeg",
            "floorPlan": "./images/prop7/prop7FloorPlan.jpeg",
            "url": "https://www.rightmove.co.uk/properties/127135595#/?channel=RES_BUY",
            "added": {
                "month": "September",
                "day": 2,
                "year": 2022
            }
        }
    ]
};



$(document).ready(function(){

    let filteredList;

    let favouriteList;

    if(localStorage.getItem('favouriteList')){
        favouriteList = JSON.parse(localStorage.getItem('favouriteList'));
    } else{
        favouriteList = []
    }

    /* <<<--------------------------- Search Page --------------------------->>> */
    $( "#propertyType" ).selectmenu();
    $( "#dateAdded" ).selectmenu();


    $("#slider").slider({
        range: true,
        min: 0,
        max: 25000000,
        values: [0, 25000000],

        slide: function(event, ui) {
            $("#range").html("£" + ui.values[0].toLocaleString() + " - £" + ui.values[1].toLocaleString());
        }
    });
    $("#range").html($("#slider").slider("values", 0) + " - " + $("#slider").slider("values", 1));

    // const values = $("#slider").slider("values");
    // console.log(values[0]);  // start value of the range
    // console.log(values[1]);  // end value of the range

    $( "#minBedrooms" ).spinner({
        min: 1,
        max: 15,
        step: 1,
    });
    $( "#maxBedrooms" ).spinner({
        min: 1,
        max: 15,
        step: 1,
    });



    /* ---------- Submit Button function ---------- */
    $('#submitBtn').click(function (){

        filteredList = [];

        const values = $("#slider").slider("values");
        console.log(values[0]);  // start value of the range
        console.log(values[1]);  // end value of the range

        const type = $('#propertyType').val();
        const minPrice = values[0];
        const maxPrice = values[1];
        const minBedrooms = $('#minBedrooms').val();
        const maxBedrooms = $('#maxBedrooms').val();
        const postcode = $('#postCode').val();

        $.each(propertyData.property, function (index, property) {  //iterate through the array and find matching properties
            if ((type === 'Any' || property.type === type) && (minPrice === '' || property.price >= minPrice) &&
                (maxPrice === '' || property.price <= maxPrice) && (minBedrooms === '' || property.bedrooms >= minBedrooms) &&
                (maxBedrooms === '' || property.bedrooms <= maxBedrooms) && (postcode === '' || property.postcode === postcode)) {
                filteredList.push(property);    // If the element meets the search criteria, add it to the filteredList array
            }
        });
        localStorage.setItem('filteredList', JSON.stringify(filteredList));    //storing the stringifies objects into the localstorage
        window.open('result.html');
    });

    $('#view-favorites-button').click(function () {
        $.each(favouriteList, function (index, property) {
            createPropertyAdd(index,property,'#view-favorites-area');
        })
    })


        $.each(favouriteList, function (index, property) {
            createPropertyAdd(index,property,'#fav-page-content');
        })

    /* <<<--------------------------- Result Page --------------------------->>> */

    filteredList = JSON.parse(localStorage.getItem('filteredList'));   //read back the object from localstorage

    /* ---------- Create ads for every matching properties ---------- */
    $.each(filteredList, function (index, property)
        {createPropertyAdd(index, property, '#filtered-properties-container')}
    );

    function createPropertyAdd (index, property, addingArea){
        const formattedPrice = property.price.toLocaleString();
        // Create a new property ad element using template literals and the current property object
        const $propertyAd = $(`
            <div class="propAdBox" style="position: relative">
            <div style="width: 320px;">
                <img class="propMainImg" src="${property.picture1}" alt="${property.type}"/>
                </div>
                <div style="margin: 10px;">
                    <h2 class="property-title">${property.title}</h2>
                    <h5>${property.type} in ${property.postcode}</h5>
                    <h4>${property.tenure}</h4>
                    <h4>${property.bedrooms} &nbsp;<i class="fa-solid fa-bed"></i></h4>
                    <p class="p-details" style="font-size: 13px; width: 97%; height: 40%; margin-top: 5px">${property.shortDescription}<span class="seeMore" style="color: #0081ff; font-size: 16px"> see more...</span></p>
                    <div style="display: flex; justify-content: space-between; width: 97%;">
                        <h3 style="color: #04AA6D; font-size: x-large">£ ${formattedPrice}</h3>
                        <button class="favourite-button">Add to Favourites</button>
                    </div>
                </div>
            </div>
        `);
        $(addingArea).append($propertyAd);    // Append the property ad element to the page

        /* ---------- Onclick see more, save the selected property to the localstorage ---------- */
        $propertyAd.find('.seeMore,.p-details').click(function () {
            localStorage.setItem('property', JSON.stringify(property));    //storing the selected property objects into the localstorage
            window.open('property.html');
        });
    }

    /* ---------- Drag the title to add to the favourites ---------- */
    $('.property-title').draggable({
        revert: true  // return to original position after dropped
    });

    $("#favourite-items-container").droppable({
        drop: function(event, ui) { // When a draggable element is dropped on the droppable element
            const propertyTitle = ui.draggable.text(); // Get the text of the dropped element
            addPropertyToFavourites(propertyTitle); // Call the function "addPropertyToFavourites" with the text of the dropped element as an argument
        }
    });

    $('.favourite-button').click(function() {
        const propertyTitle = $(this).parent().parent().find('.property-title').text(); // Get the text of the first h2 element within the parent element of the clicked element
        addPropertyToFavourites(propertyTitle); // Call the function "addPropertyToFavourites" with the property title as an argument
    });


    function addPropertyToFavourites(propertyTitle) {
        const favProperty = propertyData.property.find(element => element.title === propertyTitle);
        if (!favouriteList.includes(favProperty)) {
            favouriteList.push(favProperty);
            addPropertyToList(favProperty);
        }
    }

    function addPropertyToList(favProperty) {
        // Create a new element to be appended to the element with id "droppedList"
        const formattedPrice = favProperty.price.toLocaleString();
        const $favAdded = $(`
                <div class="favItemBox">
                <div>
                    <h5 class="fav-added-title">${favProperty.title}</h5>
                    <h4>£ ${formattedPrice}</h4>
                    </div>
                    <i class="fas fa-times delete-icon fa-xl"></i>
                </div>
  `);
        $('#favourite-items').append($favAdded); // Append the newly created element to the element with id "droppedList"
        $('#favorites-list').append($favAdded); // Append the newly created element to the element with id "favorites-list"
    }


    /* ---------- Remove from favourites by delete icon ---------- */
    $('#favourite-items').on('click', '.delete-icon', function() {
        const propertyTitle = $(this).parent().find('.fav-added-title').text();   // Call the removePropertyFromFavourites function and pass it the propertyTitle and the clicked element
        removePropertyFromFavourites(propertyTitle, this);
    });

    function removePropertyFromFavourites(propertyTitle, clickedElement) {
        const index = favouriteList.findIndex(element => element.title === propertyTitle);
        if (index !== -1) {
            favouriteList.splice(index, 1);
            $(clickedElement).parent().remove();
            localStorage.setItem("favouriteList", JSON.stringify(favouriteList))
        }
    }


    /* ---------- Clear favourite list ---------- */
    $('#clear-button').click(function() {
        clearFavourites();
    });

    function clearFavourites() {
        favouriteList.splice(0, favouriteList.length);  // Clear the favouriteList array
        $('#favourite-items').empty(); // Remove all elements from the element with id "droppedList"
    }

    // Add a click listener to the element with the id "droppedList"
    $('#favourite-items').on('click', '.favItemBox', function() {
        $(this).draggable({ // Make the clicked element draggable
            revert: true // When the draggable element is dropped, it will return to its original position
        });
    });

    $('#filtered-properties-container').droppable({
        drop: function(event, ui) {
            const propertyTitle = ui.draggable.find('h5').text();
            const clickedElement = ui.helper.clone().replaceAll(ui.draggable);
            removePropertyFromFavourites(propertyTitle, clickedElement);
        }
    });


    //<<<----------- Save favourite to the properties and read it back ----------->>>
    favouriteList = JSON.parse(localStorage.getItem("favouriteList")) || [];    // Retrieve the favouriteList from local storage
    favouriteList.forEach(addPropertyToList);
    window.addEventListener("beforeunload", function(event) {   // Save the favouriteList to local storage
        localStorage.setItem("favouriteList", JSON.stringify(favouriteList));
    });



    /* <<<--------------------------- Property Page --------------------------->>> */

    $("#propInfoTabs").tabs();

    const selectedProperty = JSON.parse(localStorage.getItem('property'));  //get the see more... selected property

    $('.add-to-favourite').click(function(){
        addPropertyToFavourites(selectedProperty.title);
    });

    $('.propImg1').append(`<img class="property-image" src="${selectedProperty.picture1}" alt="">`);
    $('.propImg2').append(`<img class="property-image" src="${selectedProperty.picture2}" alt="">`);
    $('.propImg3').append(`<img class="property-image" src="${selectedProperty.picture3}" alt="">`);
    $('.propImg4').append(`<img class="property-image" src="${selectedProperty.picture4}" alt="">`);
    $('.propImg5').append(`<img class="property-image" src="${selectedProperty.picture5}" alt="">`);
    $('.propImg6').append(`<img class="property-image" src="${selectedProperty.picture6}" alt="">`);

    $('.propPic1').append(`<img class="propImageSelector" src="${selectedProperty.picture1}" onclick="currentSlide(1)" alt="">`);
    $('.propPic2').append(`<img class="propImageSelector" src="${selectedProperty.picture2}" onclick="currentSlide(2)" alt="">`);
    $('.propPic3').append(`<img class="propImageSelector" src="${selectedProperty.picture3}" onclick="currentSlide(3)" alt="">`);
    $('.propPic4').append(`<img class="propImageSelector" src="${selectedProperty.picture4}" onclick="currentSlide(4)" alt="">`);
    $('.propPic5').append(`<img class="propImageSelector" src="${selectedProperty.picture5}" onclick="currentSlide(5)" alt="">`);
    $('.propPic6').append(`<img class="propImageSelector" src="${selectedProperty.picture6}" onclick="currentSlide(6)" alt="">`);

    const formattedPrice = selectedProperty.price.toLocaleString();

    $(`.title-fullPage`).append(selectedProperty.title);
    $(`.postcode-fullPage`).append(selectedProperty.postcode);
    $(`.date-fullPage`).append(selectedProperty.added.year + "/" +  selectedProperty.added.month + "/" + selectedProperty.added.day);
    $(`.type-fullPage`).append(selectedProperty.type);
    $(`.bedrooms-fullPage`).append(selectedProperty.bedrooms);
    $(`.tenure-fullPage`).append(selectedProperty.tenure);
    $(`.price-fullPage`).append(formattedPrice);

    $(`.propDetails`).append(selectedProperty.description);
    $(`.propFloorPlan`).append(`<img src="${selectedProperty.floorPlan}" alt="" style="width: 100%">`);
    $(`.propLocation`).append(`<iframe src="${selectedProperty.location}"></iframe>`);


})




// $( function() {
//     // $( "#propertyType" ).selectmenu();
//     // $( "#dateAdded" ).selectmenu();
//
//     $("#slider").slider({
//         range: true,
//         min: 0,
//         max: 100,
//         values: [25, 75],
//         slide: function(event, ui) {
//             $("#range").html(ui.values[0] + " - " + ui.values[1]);
//         }
//     });
//     $("#range").html($("#slider").slider("values", 0) + " - " + $("#slider").slider("values", 1));
//
//     var values = $("#slider").slider("values");
//     console.log(values[0]);  // start value of the range
//     console.log(values[1]);  // end value of the range
//
// } );

// $(document).ready(function () {  //Onclick submit button
//     $('#submitBtn').click(searchProp);
// });


// function searchProp() {
//
//     const filteredList = [];
//
//     const type = $('#propertyType').val();
//     const minPrice = $('#minPrice').val();
//     const maxPrice = $('#maxPrice').val();
//     const minBedrooms = $('#minBedrooms').val();
//     const maxBedrooms = $('#maxBedrooms').val();
//     const postcode = $('#postCode').val();
//
//     // Use $.each() to iterate over the elements in the propertyData.property array
//     $.each(propertyData.property, function (index, property) {
//         // Check if the current element meets the search criteria
//         if ((type === 'Any' || property.type === type) && (minPrice === '' || property.price >= minPrice) &&
//             (maxPrice === '' || property.price <= maxPrice) && (minBedrooms === '' || property.bedrooms >= minBedrooms) &&
//             (maxBedrooms === '' || property.bedrooms <= maxBedrooms) && (postcode === '' || property.postcode === postcode)) {
//             console.log(property);
//             // If the element meets the search criteria, add it to the filteredList array
//             filteredList.push(property);
//             console.log(filteredList);
//
//         }
//     });
//     const stringifiesFilteredList = JSON.stringify(filteredList); //Only strings can be stored in localstorage
//     localStorage.setItem('filteredList', stringifiesFilteredList);    //storing the stringifies objects into the localstorage
//     window.open('result.html');
// }

/* <<<--------------------------- Result Page --------------------------->>> */

// const filteredListBack = JSON.parse(localStorage.getItem('filteredList'));   //read back the object from localstorage

// $.each(filteredListBack, function (index, property) {    // Loop through the array of filtered listings using the jQuery each() function
//
//     // Create a new property ad element using template literals and the current property object
//     const $propertyAd = $(`
//                 <div class="propAdBox">
//   <img class="propMainImg" src="${property.picture1}" alt="${property.type}"/>
//   <div>
//     <h2 class="property-title">${property.title}</h2>
//     <h4>${property.bedrooms} Bedrooms</h4>
//     <h5>${property.postcode}</h5>
//     <p>${property.shortDescription}</p>
//     <h3>${property.price}</h3>
//     <p class="seeMore">see more...</p>
//     <button class="favourite-button">Add to Favourites</button>
//   </div>
// </div>
//
//   `);
//     $('#filtered-properties-container').append($propertyAd);    // Append the property ad element to the page
//
//     $propertyAd.find('.seeMore').click(function () {
//         const stringifiesObject = JSON.stringify(property); //Only strings can be stored in localstorage
//         localStorage.setItem('property', stringifiesObject);    //storing the stringifies objects into the localstorage
//         window.open('property.html');
//     });
// });

// let favouriteList = []; // Declare an empty array to store favourite items

$(function () {
    // $('.property-title').draggable({ // Make elements with class "drag" draggable
    //     revert: true // When the draggable element is dropped, it will return to its original position
    // });

    // $("#favourite-items-container").droppable({ // Make element with id "drpToMe" a droppable target
    //     drop: function(event, ui) { // When a draggable element is dropped on the droppable element
    //         const content = ui.draggable.text(); // Get the text of the dropped element
    //         //$(this).addClass("ui-state-highlight"); // Add the class "ui-state-highlight" to the droppable element
    //         addPropertyToFavourites(content); // Call the function "addPropertyToFavourites" with the text of the dropped element as an argument
    //     }
    // });

    // $('.favourite-button').click(function() { // When an element with class "favourite-button" is clicked
    //     const propertyTitle = $(this).parent().find('.property-title').text(); // Get the text of the first h2 element within the parent element of the clicked element
    //     addPropertyToFavourites(propertyTitle); // Call the function "addPropertyToFavourites" with the property title as an argument
    // });

    // function addPropertyToFavourites(propertyTitle) {
    //     const favProperty = propertyData.property.find(element => element.title === propertyTitle);
    //     if (!favouriteList.includes(favProperty)) {
    //         favouriteList.push(favProperty);
    //         addPropertyToList(favProperty);
    //     }
    // }

  //   function addPropertyToList(favProperty) {
  //       // Create a new element to be appended to the element with id "droppedList"
  //       const $favAdded = $(`
  //   <div class="favItemBox">
  //   <div>
  //     <h5 class="dragFavRemove">${favProperty.title}</h5>
  //     <h4>£ ${favProperty.price}</h4>
  //     </div>
  //     <i class="fas fa-times delete-icon fa-xl"></i>
  //   </div>
  // `);
  //       $('#favourite-items').append($favAdded); // Append the newly created element to the element with id "droppedList"
  //   }

    // <<<------------ Delete by icon begins ------------>>>

// Add a click listener to the element with the id "droppedList"
//     $('#favourite-items').on('click', '.delete-icon', function() {  // When the delete icon is clicked, find the text of the h5 element that is a sibling of the clicked element
//         const propertyTitle = $(this).parent().find('h5').text();   // Call the removePropertyFromFavourites function and pass it the propertyTitle and the clicked element
//         removePropertyFromFavourites(propertyTitle, this);
//     });

    // function removePropertyFromFavourites(propertyTitle, clickedElement) {  // Find the index of the element in the favouriteList array that has a title property that matches the propertyTitle argument
    //     const index = favouriteList.findIndex(element => element.title === propertyTitle);  // If the index is not equal to -1 (i.e. the element was found in the array)
    //     if (index !== -1) { // Remove the element from the favouriteList array
    //         favouriteList.splice(index, 1); // Remove the clicked element's parent element from the DOM
    //         $(clickedElement).parent().remove();
    //     }
    // }
    // <<<------------ Delete by icon ends ------------>>>

    // $('#clear-button').click(function() {
    //     clearFavourites();
    // });
    //
    // function clearFavourites() {
    //     favouriteList.splice(0, favouriteList.length);  // Clear the favouriteList array
    //     $('#favourite-items').empty(); // Remove all elements from the element with id "droppedList"
    // }

    // Add a click listener to the element with the id "droppedList"
    // $('#favourite-items').on('click', '.favItemBox', function() {
    //     $(this).draggable({ // Make the clicked element draggable
    //         revert: true // When the draggable element is dropped, it will return to its original position
    //     });
    // });

    // $('#filtered-properties-container').droppable({
    //     drop: function(event, ui) {
    //         const propertyTitle = ui.draggable.find('h5').text();
    //         const clickedElement = ui.helper.clone().replaceAll(ui.draggable);
    //         removePropertyFromFavourites(propertyTitle, clickedElement);
    //     }
    // });


    // //<<<----------- Save favourite to the properties and read it back ----------->>>
    //
    // let favouriteList = JSON.parse(localStorage.getItem("favouriteList")) || [];    // Retrieve the favouriteList array from local storage when the page is loaded
    // favouriteList.forEach(addPropertyToList);   // Iterate over the elements in the array and add them to the list
    // window.addEventListener("beforeunload", function(event) {   // Save the favouriteList array to local storage when the page is unloaded
    //     localStorage.setItem("favouriteList", JSON.stringify(favouriteList));
    // });

});


/* <<<--------------------------- Property Page --------------------------->>> */
// $(function () {
//     $("#propInfoTabs").tabs();
// });

// const backToProperty = JSON.parse(localStorage.getItem('property'));   //read back the object from localstorage
// propertyPage(backToProperty);

// function propertyPage(selectedProperty) {
//
//
//     // $('#add-to-favourite').click(function(){
//     //     favouriteList.push(selectedProperty);
//     //     console.log(favouriteList);
//     // });
//     //
//     // $('.propImg1').append(`<img class="property-image" src="${selectedProperty.picture1}" alt="">`);
//     // $('.propImg2').append(`<img class="property-image" src="${selectedProperty.picture2}" alt="">`);
//     // $('.propImg3').append(`<img class="property-image" src="${selectedProperty.picture3}" alt="">`);
//     // $('.propImg4').append(`<img class="property-image" src="${selectedProperty.picture4}" alt="">`);
//     // $('.propImg5').append(`<img class="property-image" src="${selectedProperty.picture5}" alt="">`);
//     // $('.propImg6').append(`<img class="property-image" src="${selectedProperty.picture6}" alt="">`);
//     //
//     // $('.propPic1').append(`<img class="propImageSelector" src="${selectedProperty.picture1}" onclick="currentSlide(1)" alt="">`);
//     // $('.propPic2').append(`<img class="propImageSelector" src="${selectedProperty.picture2}" onclick="currentSlide(2)" alt="">`);
//     // $('.propPic3').append(`<img class="propImageSelector" src="${selectedProperty.picture3}" onclick="currentSlide(3)" alt="">`);
//     // $('.propPic4').append(`<img class="propImageSelector" src="${selectedProperty.picture4}" onclick="currentSlide(4)" alt="">`);
//     // $('.propPic5').append(`<img class="propImageSelector" src="${selectedProperty.picture5}" onclick="currentSlide(5)" alt="">`);
//     // $('.propPic6').append(`<img class="propImageSelector" src="${selectedProperty.picture6}" onclick="currentSlide(6)" alt="">`);
//     //
//     // $(`.title-fullPage`).append(selectedProperty.title);
//     // $(`.postcode-fullPage`).append(selectedProperty.postcode);
//     // $(`.date-fullPage`).append(selectedProperty.added.year + "/" +  selectedProperty.added.month + "/" + selectedProperty.added.day);
//     // $(`.type-fullPage`).append(selectedProperty.type);
//     // $(`.bedrooms-fullPage`).append(selectedProperty.bedrooms);
//     // $(`.tenure-fullPage`).append(selectedProperty.tenure);
//     // $(`.price-fullPage`).append(selectedProperty.price);
//     //
//     // $(`.propDetails`).append(selectedProperty.description);
//     // $(`.propFloorPlan`).append(`<img src="${selectedProperty.floorPlan}" alt="" style="width: 100%">`);
//     // $(`.propLocation`).append(`<iframe src="${selectedProperty.location}"></iframe>`);
//
// }

// <-------- SlideShow begins ------->
let slideIndex = 1;
showSlides(slideIndex);

function currentSlide(n) {
    showSlides(slideIndex = n);
}

function showSlides(n) {
    //let i;
    let slides = $(".propLargeImage");
    let dots = $(".propImageSelector");
    //let captionText = $("#caption");
    if (n > slides.length) {
        slideIndex = 1
    }
    if (n < 1) {
        slideIndex = slides.length
    }
    slides.css("display", "none");
    dots.removeClass("active");
    $(slides[slideIndex - 1]).css("display", "block");
    $(dots[slideIndex - 1]).addClass("active");
    //captionText.html(dots[slideIndex-1].alt);
}

// <-------- SlideShow ends ------->




